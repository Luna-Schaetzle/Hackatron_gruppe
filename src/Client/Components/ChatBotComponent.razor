@page "/chatbot"

<h3>Chatbot</h3>

<div class="chat-container">
    @foreach (var message in messages)
    {
        <div class="message @(message.IsBotMessage ? "bot-message" : "user-message")">
            @message.Text
        </div>
    }
</div>

<input type="text" @bind-value="userInput" @bind-value:event="oninput" @onkeypress="HandleKeyPress" placeholder="Type your message..." />
<button @onclick="SendMessage">Send</button>

@code {
    private string userInput = "";
    private List<Message> messages = new List<Message>();

    private void SendMessage()
    {
        if (!string.IsNullOrWhiteSpace(userInput))
        {
            messages.Add(new Message(userInput, false));
            ReplyToUser(userInput);
            userInput = "";
        }
    }

    private void ReplyToUser(string message)
    {
        // Simple logic to generate bot responses based on user input
        string reply;
        if (message.ToLower().Contains("hallo"))
        {
            reply = "Hallo! Wie kann ich Ihnen helfen?";
        }
        else if (message.ToLower().Contains("zimmer buchen"))
        {
            reply = "Sicher! MÃ¶chten Sie ein Einzelzimmer oder Doppelzimmer buchen?";
        }
        else
        {
            reply = "Entschuldigung, ich habe Sie nicht verstanden.";
        }
        
        messages.Add(new Message(reply, true));
    }

    private void HandleKeyPress(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
        {
            SendMessage();
        }
    }

    public class Message
    {
        public string Text { get; set; }
        public bool IsBotMessage { get; set; }

        public Message(string text, bool isBotMessage)
        {
            Text = text;
            IsBotMessage = isBotMessage;
        }
    }
}
